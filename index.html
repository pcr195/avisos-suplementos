
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Alarmas suplementos</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 10px; }
    label { display:block; margin-top:8px; }
    input, select, button { width: 100%; padding: 6px; margin-top:4px; }
    .item { border:1px solid #ccc; padding:6px; margin-top:6px; font-size:14px; }
  </style>
</head>
<body>
  <h2>Mis suplementos</h2>

  <label>Nombre del suplemento</label>
  <input type="text" id="nombre" placeholder="Ej: Magnesio 400 mg">

  <label>Momento del día</label>
  <select id="momento">
    <option value="Desayuno">Desayuno</option>
    <option value="Comida">Comida</option>
    <option value="Cena">Cena</option>
  </select>

  <label>Veces al día</label>
  <input type="number" id="veces" min="1" max="3" value="1">

  <label>Hora (24h)</label>
  <input type="time" id="hora">

  <button onclick="agregarSuplemento()">Guardar suplemento</button>

  <h3>Lista programada</h3>
  <div id="lista"></div>

  <script>
    // Cargamos desde localStorage
    let suplementos = JSON.parse(localStorage.getItem('suplementos') || '[]');
    mostrarLista();

    function agregarSuplemento() {
      const nombre  = document.getElementById('nombre').value.trim();
      const momento = document.getElementById('momento').value;
      const veces   = parseInt(document.getElementById('veces').value, 10);
      const hora    = document.getElementById('hora').value;

      if (!nombre  !hora  !veces) {
        alert('Rellena nombre, momento, veces y hora');
        return;
      }

      suplementos.push({ nombre, momento, veces, hora });
      localStorage.setItem('suplementos', JSON.stringify(suplementos));
      mostrarLista();

      document.getElementById('nombre').value = '';
      document.getElementById('veces').value = '1';
    }

    function borrarSuplemento(i) {
      suplementos.splice(i, 1);
      localStorage.setItem('suplementos', JSON.stringify(suplementos));
      mostrarLista();
    }

    function mostrarLista() {
      const cont = document.getElementById('lista');
      cont.innerHTML = '';
      suplementos.forEach((s, i) => {
        const div = document.createElement('div');
        div.className = 'item';
        div.innerHTML =
          '<b>' + s.nombre + '</b><br>' +
          'Momento: ' + s.momento + '<br>' +
          'Veces al día: ' + s.veces + '<br>' +
          'Hora base: ' + s.hora +
          '<br><button onclick="borrarSuplemento(' + i + ')">Eliminar</button>';
        cont.appendChild(div);
      });
    }

    // Comprobar cada minuto si coincide la hora
    setInterval(() => {
      const ahora = new Date();
      const hh = String(ahora.getHours()).padStart(2, '0');
      const mm = String(ahora.getMinutes()).padStart(2, '0');
      const horaActual = hh + ':' + mm;

      suplementos.forEach(s => {
        if (s.hora === horaActual) {
          alert('Es hora de tomar: ' + s.nombre +
                ' (' + s.momento + ', ' + s.veces + ' vez/veces al día)');
        }
      });
    }, 60000);
  </script>
</body>
</html>
    
